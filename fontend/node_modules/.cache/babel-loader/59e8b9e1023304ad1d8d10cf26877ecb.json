{"ast":null,"code":"import _objectSpread from \"D:/Code/cnpm/ban-hang-gia-dung-frontend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _regeneratorRuntime from \"D:/Code/cnpm/ban-hang-gia-dung-frontend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/Code/cnpm/ban-hang-gia-dung-frontend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:/Code/cnpm/ban-hang-gia-dung-frontend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"D:\\\\Code\\\\cnpm\\\\ban-hang-gia-dung-frontend\\\\frontend\\\\src\\\\components\\\\Admin\\\\components\\\\AdminProduct\\\\AdminCreate.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { editCurrentPage, saveProduct } from \"../../../../actions/ProductAction\";\nimport { useHistory } from \"react-router-dom\";\nimport { getAllSelectList } from \"../../../../actions/SelectListAction\";\nimport { getAllTypeProduct } from \"../../../../actions/ListTypeProductAction\";\nimport { getListCategoryAction } from \"../../../../actions/CategoryAction\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction AdminCreate(props) {\n  _s();\n\n  var _this = this;\n\n  var _useForm = useForm({\n    defaultValues: {}\n  }),\n      register = _useForm.register,\n      handleSubmit = _useForm.handleSubmit;\n\n  var dispatch = useDispatch();\n  var history = useHistory();\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      image = _useState2[0],\n      setImage = _useState2[1];\n\n  var _useSelector = useSelector(function (state) {\n    return state.allProduct.product;\n  }),\n      pages = _useSelector.pages;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.category;\n  }),\n      categoryList = _useSelector2.categoryList;\n\n  useEffect(function () {\n    dispatch(getAllSelectList());\n  }, [dispatch]);\n  useEffect(function () {\n    dispatch(getAllTypeProduct());\n  }, [dispatch]);\n  useEffect(function () {\n    dispatch(getListCategoryAction());\n  }, [dispatch]);\n\n  var handleFileImageChange = function handleFileImageChange(e) {\n    setImage(e.target.files[0]);\n  };\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(data) {\n      var formData;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              formData = new FormData();\n              formData.append(\"name\", data.name);\n              formData.append(\"price\", data.price);\n              formData.append(\"amount\", data.amount);\n              formData.append(\"salePrice\", data.salePrice);\n              formData.append(\"category_id\", data.category_id);\n              formData.append(\"image\", image); // formData.append(\"os\", data.os);\n              // formData.append(\"ram\", data.ram);\n              // formData.append(\"battery\", data.battery);\n              // formData.append(\"rom\", data.rom);\n              // formData.append(\"camera\", data.camera);\n              // formData.append(\"special\", data.special);\n              // formData.append(\"design\", data.design);\n              // formData.append(\"screen\", data.screen);\n\n              _context.next = 9;\n              return dispatch(saveProduct(formData));\n\n            case 9:\n              _context.next = 11;\n              return dispatch(editCurrentPage(pages));\n\n            case 11:\n              history.push(\"/admin/product\");\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-create\",\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      children: \"Create Product\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"admin-create-product\",\n      onSubmit: handleSubmit(onSubmit),\n      encType: \"multipart/form-data\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", _objectSpread(_objectSpread({}, register(\"name\")), {}, {\n        placeholder: \"T\\xEAn s\\u1EA3n ph\\u1EA9m\"\n      }), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", _objectSpread(_objectSpread({}, register(\"amount\")), {}, {\n        placeholder: \"Amount\",\n        type: \"number\"\n      }), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", _objectSpread(_objectSpread({}, register(\"price\")), {}, {\n        placeholder: \"Gi\\xE1\",\n        type: \"number\"\n      }), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", _objectSpread(_objectSpread({}, register(\"salePrice\")), {}, {\n        placeholder: \"Gi\\xE1 khuy\\u1EBFn m\\xE3i\",\n        type: \"number\"\n      }), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), categoryList.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"select-type\",\n        children: /*#__PURE__*/_jsxDEV(\"select\", _objectSpread(_objectSpread({}, register(\"category_id\")), {}, {\n          children: categoryList.map(function (item, index) {\n            return /*#__PURE__*/_jsxDEV(\"option\", {\n              value: item._id,\n              children: item.name\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 19\n            }, _this);\n          })\n        }), void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", _objectSpread(_objectSpread({\n        type: \"file\"\n      }, register(\"image\")), {}, {\n        onChange: handleFileImageChange\n      }), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Add Product\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AdminCreate, \"2eW2BeFTC9xAhRfJXvwACsqk6yM=\", false, function () {\n  return [useForm, useDispatch, useHistory, useSelector, useSelector];\n});\n\n_c = AdminCreate;\nexport default AdminCreate;\n\nvar _c;\n\n$RefreshReg$(_c, \"AdminCreate\");","map":{"version":3,"sources":["D:/Code/cnpm/ban-hang-gia-dung-frontend/frontend/src/components/Admin/components/AdminProduct/AdminCreate.js"],"names":["React","useEffect","useState","useForm","useSelector","useDispatch","editCurrentPage","saveProduct","useHistory","getAllSelectList","getAllTypeProduct","getListCategoryAction","AdminCreate","props","defaultValues","register","handleSubmit","dispatch","history","image","setImage","state","allProduct","product","pages","category","categoryList","handleFileImageChange","e","target","files","onSubmit","data","formData","FormData","append","name","price","amount","salePrice","category_id","push","length","map","item","index","_id"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nimport {\n  editCurrentPage,\n  saveProduct,\n} from \"../../../../actions/ProductAction\";\nimport { useHistory } from \"react-router-dom\";\nimport { getAllSelectList } from \"../../../../actions/SelectListAction\";\nimport { getAllTypeProduct } from \"../../../../actions/ListTypeProductAction\";\nimport { getListCategoryAction } from \"../../../../actions/CategoryAction\";\n\nfunction AdminCreate(props) {\n  const { register, handleSubmit } = useForm({ defaultValues: {} });\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  const [image, setImage] = useState(\"\");\n  const { pages } = useSelector((state) => state.allProduct.product);\n  const { categoryList } = useSelector((state) => state.category);\n\n  useEffect(() => {\n    dispatch(getAllSelectList());\n  }, [dispatch]);\n\n  useEffect(() => {\n    dispatch(getAllTypeProduct());\n  }, [dispatch]);\n\n  useEffect(() => {\n    dispatch(getListCategoryAction());\n  }, [dispatch]);\n\n  const handleFileImageChange = (e) => {\n    setImage(e.target.files[0]);\n  };\n\n  const onSubmit = async (data) => {\n    let formData = new FormData();\n\n    formData.append(\"name\", data.name);\n    formData.append(\"price\", data.price);\n    formData.append(\"amount\", data.amount);\n    formData.append(\"salePrice\", data.salePrice);\n    formData.append(\"category_id\", data.category_id);\n    formData.append(\"image\", image);\n\n    // formData.append(\"os\", data.os);\n    // formData.append(\"ram\", data.ram);\n    // formData.append(\"battery\", data.battery);\n    // formData.append(\"rom\", data.rom);\n    // formData.append(\"camera\", data.camera);\n    // formData.append(\"special\", data.special);\n    // formData.append(\"design\", data.design);\n    // formData.append(\"screen\", data.screen);\n\n    await dispatch(saveProduct(formData));\n    await dispatch(editCurrentPage(pages));\n    history.push(\"/admin/product\");\n  };\n\n  return (\n    <div className=\"admin-create\">\n      <span>Create Product</span>\n      <form\n        className=\"admin-create-product\"\n        onSubmit={handleSubmit(onSubmit)}\n        encType=\"multipart/form-data\"\n      >\n        <input {...register(\"name\")} placeholder=\"Tên sản phẩm\"></input>\n        <input\n          {...register(\"amount\")}\n          placeholder=\"Amount\"\n          type=\"number\"\n        ></input>\n        <input {...register(\"price\")} placeholder=\"Giá\" type=\"number\"></input>\n        <input\n          {...register(\"salePrice\")}\n          placeholder=\"Giá khuyến mãi\"\n          type=\"number\"\n        ></input>\n        {categoryList.length > 0 && (\n          <div className=\"select-type\">\n            <select {...register(\"category_id\")}>\n              {categoryList.map((item, index) => {\n                return (\n                  <option key={index} value={item._id}>\n                    {item.name}\n                  </option>\n                );\n              })}\n            </select>\n          </div>\n        )}\n\n        <input\n          type=\"file\"\n          {...register(\"image\")}\n          onChange={handleFileImageChange}\n        ></input>\n        <button type=\"submit\">Add Product</button>\n      </form>\n    </div>\n  );\n}\n\nexport default AdminCreate;\n"]},"metadata":{},"sourceType":"module"}