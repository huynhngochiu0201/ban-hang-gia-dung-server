{"ast":null,"code":"import _objectSpread from \"D:/Code/cnpm/ban-hang-gia-dung-frontend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _regeneratorRuntime from \"D:/Code/cnpm/ban-hang-gia-dung-frontend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/Code/cnpm/ban-hang-gia-dung-frontend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:/Code/cnpm/ban-hang-gia-dung-frontend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"D:\\\\Code\\\\cnpm\\\\ban-hang-gia-dung-frontend\\\\frontend\\\\src\\\\components\\\\Admin\\\\components\\\\AdminProduct\\\\AdminUpdate.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { getproductById, removeProductById, saveProduct } from \"../../../../actions/ProductAction\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { getAllSelectList } from \"../../../../actions/SelectListAction\";\nimport { getListCategoryAction } from \"../../../../actions/CategoryAction\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction AdminUpdate(props) {\n  _s();\n\n  var _this = this;\n\n  var _useForm = useForm(),\n      register = _useForm.register,\n      handleSubmit = _useForm.handleSubmit;\n\n  var _useParams = useParams(),\n      id = _useParams.id;\n\n  var dispatch = useDispatch();\n  var history = useHistory();\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      image = _useState2[0],\n      setImage = _useState2[1];\n\n  var detailProduct = useSelector(function (state) {\n    return state.getProductById.product;\n  });\n  var SelectList = useSelector(function (state) {\n    return state.selectList.List;\n  });\n\n  var _useState3 = useState(undefined),\n      _useState4 = _slicedToArray(_useState3, 2),\n      activeTypeProduct = _useState4[0],\n      setActiveTypeproduct = _useState4[1];\n\n  var _useSelector = useSelector(function (state) {\n    return state.allTypeProduct;\n  }),\n      List = _useSelector.List;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.category;\n  }),\n      categoryList = _useSelector2.categoryList;\n\n  useEffect(function () {\n    dispatch(getproductById(id));\n    return function () {\n      dispatch(removeProductById());\n    };\n  }, [dispatch, id]);\n  useEffect(function () {\n    dispatch(getAllSelectList());\n  }, []);\n  useEffect(function () {\n    dispatch(getAllSelectList());\n  }, []);\n  useEffect(function () {\n    dispatch(getListCategoryAction());\n  }, [dispatch]);\n\n  var handleFileImageChange = function handleFileImageChange(e) {\n    setImage(e.target.files[0]);\n  };\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(data) {\n      var formData;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              formData = new FormData();\n              formData.append(\"name\", data.name);\n              formData.append(\"price\", data.price);\n              formData.append(\"amount\", data.amount);\n              formData.append(\"salePrice\", data.salePrice);\n              formData.append(\"category_id\", data.category_id);\n              formData.append(\"image\", image);\n              formData.append(\"_id\", id); // formData.append(\"os\", data.os);\n              // formData.append(\"ram\", data.ram);\n              // formData.append(\"battery\", data.battery);\n              // formData.append(\"rom\", data.rom);\n              // formData.append(\"camera\", data.camera);\n              // formData.append(\"special\", data.special);\n              // formData.append(\"design\", data.design);\n              // formData.append(\"screen\", data.screen);\n\n              _context.next = 10;\n              return dispatch(saveProduct(formData));\n\n            case 10:\n              history.push(\"/admin/product\");\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-create\",\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      children: \"Update Product\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), detailProduct ? /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"admin-create-product\",\n      onSubmit: handleSubmit(onSubmit),\n      encType: \"multipart/form-data\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", _objectSpread(_objectSpread({}, register(\"name\")), {}, {\n        placeholder: \"Name\",\n        defaultValue: detailProduct.name\n      }), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", _objectSpread(_objectSpread({}, register(\"amount\")), {}, {\n        placeholder: \"Amount\",\n        type: \"number\",\n        defaultValue: detailProduct.amount\n      }), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", _objectSpread(_objectSpread({}, register(\"price\")), {}, {\n        placeholder: \"Price\",\n        type: \"number\",\n        defaultValue: detailProduct.price\n      }), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", _objectSpread(_objectSpread({}, register(\"salePrice\")), {}, {\n        placeholder: \"SalePrice\",\n        type: \"number\",\n        defaultValue: detailProduct.salePrice\n      }), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this), categoryList.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"select-type\",\n        children: /*#__PURE__*/_jsxDEV(\"select\", _objectSpread(_objectSpread({}, register(\"category_id\")), {}, {\n          defaultValue: detailProduct.category_id,\n          children: categoryList.map(function (item, index) {\n            return /*#__PURE__*/_jsxDEV(\"option\", {\n              value: item._id,\n              children: item.name\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 21\n            }, _this);\n          })\n        }), void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", _objectSpread(_objectSpread({\n        type: \"file\"\n      }, register(\"image\")), {}, {\n        onChange: handleFileImageChange\n      }), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Update Product\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this) : \"\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AdminUpdate, \"Gpls3PnyMuUUKDUmjClsnXsgOQU=\", false, function () {\n  return [useForm, useParams, useDispatch, useHistory, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = AdminUpdate;\nexport default AdminUpdate;\n\nvar _c;\n\n$RefreshReg$(_c, \"AdminUpdate\");","map":{"version":3,"sources":["D:/Code/cnpm/ban-hang-gia-dung-frontend/frontend/src/components/Admin/components/AdminProduct/AdminUpdate.js"],"names":["React","useEffect","useState","useForm","useSelector","useDispatch","getproductById","removeProductById","saveProduct","useHistory","useParams","getAllSelectList","getListCategoryAction","AdminUpdate","props","register","handleSubmit","id","dispatch","history","image","setImage","detailProduct","state","getProductById","product","SelectList","selectList","List","undefined","activeTypeProduct","setActiveTypeproduct","allTypeProduct","category","categoryList","handleFileImageChange","e","target","files","onSubmit","data","formData","FormData","append","name","price","amount","salePrice","category_id","push","length","map","item","index","_id"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  getproductById,\n  removeProductById,\n  saveProduct,\n} from \"../../../../actions/ProductAction\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { getAllSelectList } from \"../../../../actions/SelectListAction\";\nimport { getListCategoryAction } from \"../../../../actions/CategoryAction\";\n\nfunction AdminUpdate(props) {\n  const { register, handleSubmit } = useForm();\n  const { id } = useParams();\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  const [image, setImage] = useState(\"\");\n  const detailProduct = useSelector((state) => state.getProductById.product);\n  const SelectList = useSelector((state) => state.selectList.List);\n  const [activeTypeProduct, setActiveTypeproduct] = useState(undefined);\n  const { List } = useSelector((state) => state.allTypeProduct);\n  const { categoryList } = useSelector((state) => state.category);\n\n  useEffect(() => {\n    dispatch(getproductById(id));\n\n    return () => {\n      dispatch(removeProductById());\n    };\n  }, [dispatch, id]);\n\n  useEffect(() => {\n    dispatch(getAllSelectList());\n  }, []);\n\n  useEffect(() => {\n    dispatch(getAllSelectList());\n  }, []);\n\n  useEffect(() => {\n    dispatch(getListCategoryAction());\n  }, [dispatch]);\n\n  const handleFileImageChange = (e) => {\n    setImage(e.target.files[0]);\n  };\n\n  const onSubmit = async (data) => {\n    let formData = new FormData();\n\n    formData.append(\"name\", data.name);\n    formData.append(\"price\", data.price);\n    formData.append(\"amount\", data.amount);\n    formData.append(\"salePrice\", data.salePrice);\n    formData.append(\"category_id\", data.category_id);\n    formData.append(\"image\", image);\n    formData.append(\"_id\", id);\n\n    // formData.append(\"os\", data.os);\n    // formData.append(\"ram\", data.ram);\n    // formData.append(\"battery\", data.battery);\n    // formData.append(\"rom\", data.rom);\n    // formData.append(\"camera\", data.camera);\n    // formData.append(\"special\", data.special);\n    // formData.append(\"design\", data.design);\n    // formData.append(\"screen\", data.screen);\n\n    await dispatch(saveProduct(formData));\n    history.push(\"/admin/product\");\n  };\n\n  return (\n    <div className=\"admin-create\">\n      <span>Update Product</span>\n      {detailProduct ? (\n        <form\n          className=\"admin-create-product\"\n          onSubmit={handleSubmit(onSubmit)}\n          encType=\"multipart/form-data\"\n        >\n          <input\n            {...register(\"name\")}\n            placeholder=\"Name\"\n            defaultValue={detailProduct.name}\n          ></input>\n          <input\n            {...register(\"amount\")}\n            placeholder=\"Amount\"\n            type=\"number\"\n            defaultValue={detailProduct.amount}\n          ></input>\n          <input\n            {...register(\"price\")}\n            placeholder=\"Price\"\n            type=\"number\"\n            defaultValue={detailProduct.price}\n          ></input>\n          <input\n            {...register(\"salePrice\")}\n            placeholder=\"SalePrice\"\n            type=\"number\"\n            defaultValue={detailProduct.salePrice}\n          ></input>\n\n          {categoryList.length > 0 && (\n            <div className=\"select-type\">\n              <select\n                {...register(\"category_id\")}\n                defaultValue={detailProduct.category_id}\n              >\n                {categoryList.map((item, index) => {\n                  return (\n                    <option key={index} value={item._id}>\n                      {item.name}\n                    </option>\n                  );\n                })}\n              </select>\n            </div>\n          )}\n\n          {/* <div className=\"filter-menu-firm\">\n            {List ? List.map((item) => MenuFirmProduct(item)) : \"\"}\n          </div>\n\n          {SelectList && SelectList.length > 0\n            ? SelectList.map((item) => (\n                <div className=\"select-type\">\n                  <select\n                    {...register(`${item.property}`)}\n                    defaultValue={detailProduct[`${item.property}`]}\n                  >\n                    {item.options.map((x) => (\n                      <option value={x}>{x}</option>\n                    ))}\n                  </select>\n                </div>\n              ))\n            : \"\"} */}\n\n          <input\n            type=\"file\"\n            {...register(\"image\")}\n            onChange={handleFileImageChange}\n          ></input>\n          <button type=\"submit\">Update Product</button>\n        </form>\n      ) : (\n        \"\"\n      )}\n    </div>\n  );\n}\n\nexport default AdminUpdate;\n"]},"metadata":{},"sourceType":"module"}